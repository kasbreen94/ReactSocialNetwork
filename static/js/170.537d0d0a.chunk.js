"use strict";(self.webpackChunkReactSocialNetwork=self.webpackChunkReactSocialNetwork||[]).push([[170],{170:(e,s,l)=>{l.r(s),l.d(s,{UsersContainer:()=>P});var n=l(791),r=l(420),t=l(848);const a={pagination:"users_pagination__Npw4H",infoPage:"users_infoPage__NPDb7",pageInput:"users_pageInput__lsrhg",numberPage:"users_numberPage__t8Pin",usersSearch:"users_usersSearch__6+QpO",userItem:"users_userItem__4HrV7",userPhoto:"users_userPhoto__Nyd6G",follow:"users_follow__3zutk",followed:"users_followed__cPPnS",followed_unfollow:"users_followed_unfollow__wHdb9",info:"users_info__9ncw0",stateFollow:"users_stateFollow__lEePx",stateUnfollow:"users_stateUnfollow__9fIUW",description:"users_description__U3-mM",showMore:"users_showMore__xGKj5"};var o=l(134);const i=e=>e.usersPage.users,u=e=>e.usersPage.totalCount,c=e=>e.usersPage.followingId,d=e=>e.usersPage.page,g=e=>e.usersPage.loading,h=e=>e.usersPage.filter;var m=l(184);const f=e=>{let{setPage:s,requestUsers:l,page:n}=e;const t=(0,r.v9)(h),{register:i,handleSubmit:u}=(0,o.cI)({mode:"onChange",values:{term:t.term,friend:String(t.friend)}});return(0,m.jsx)("div",{className:a.usersSearch,children:(0,m.jsxs)("form",{onChange:u((e=>{(e=>{s(1),l(n,e)})({term:e.term,friend:"null"===e.friend?null:"true"===e.friend})})),children:[(0,m.jsx)("input",{autoComplete:"off",...i("term",{})}),(0,m.jsxs)("select",{...i("friend",{}),children:[(0,m.jsx)("option",{value:"null",children:"All"}),(0,m.jsx)("option",{value:"true",children:"Only follow"}),(0,m.jsx)("option",{value:"false",children:"Only unfollow"})]})]})})},p=e=>{let{setPage:s,page:l,setCount:n,users:r,loading:t,totalPage:o}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:a.pageInput,children:["Input page number:",(0,m.jsx)("input",{className:a.numberPage,type:"number",min:1,max:o,onChange:e=>{let n=Number(e.target.value);s(n),(n<1||n>o)&&s(l)}})]}),(0,m.jsxs)("div",{className:a.pagination,children:[(0,m.jsx)("button",{onClick:()=>{s(l-1),n(4)},className:a.showMore,disabled:1===l,children:"PrevPage"}),(0,m.jsxs)("div",{className:a.numberPage,children:["Current page: ",l]}),(0,m.jsx)("button",{onClick:()=>{s(l+1),n(4)},className:a.showMore,disabled:t||r.length<100,children:"NextPage"})]})]})},_=e=>{let{setCurrentPage:s,currentPage:l,setCount:n,users:r,loading:t,count:o,totalPage:i}=e;return(0,m.jsx)("div",{children:o<r.length?(0,m.jsx)("button",{onClick:()=>n(o+10),className:a.showMore,disabled:t,children:t?"Loading...":"Load More"}):(l<i||100===o)&&(0,m.jsx)("button",{onClick:()=>{s(l+1),n(4)},className:a.showMore,children:"NextPage"})})};var x=l(87),j=l(91);const w=e=>{let{users:s,count:l}=e;const n=(0,r.v9)(c),o=(0,r.I0)();return(0,m.jsx)(m.Fragment,{children:s.slice(0,l).map(((e,s)=>(0,m.jsxs)("div",{className:a.userItem,children:[(0,m.jsxs)("span",{className:a.follow,children:[(0,m.jsx)(x.OL,{to:"/"+e.id,children:(0,m.jsx)("img",{src:e.photos.small?e.photos.small:j.Z,alt:"",className:a.userPhoto})}),(0,m.jsx)("button",{className:"".concat(a.followed," ").concat(e.followed&&a.followed_unfollow),disabled:n===e.id,onClick:()=>o((0,t.Gp)(e.id)),children:e.followed?"Unfollow":"Follow"})]}),(0,m.jsxs)("div",{className:a.info,children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Name: "}),e.name]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Followed:"}),(0,m.jsx)("div",{className:"".concat(a.stateFollow," ").concat(!e.followed&&a.stateUnfollow)})]}),(0,m.jsx)("span",{children:"User id: "}),e.id]}),null!==e.status&&(0,m.jsxs)("div",{className:a.description,children:[(0,m.jsx)("span",{children:"Status: "}),e.status]})]},s)))})},P=n.memo((()=>{const e=(0,r.v9)(i),s=(0,r.v9)(u),l=(0,r.v9)(d),o=(0,r.v9)(g),c=(0,r.v9)(h),j=(0,r.I0)(),P=e=>{j(t.Nw.setCurrentPage(e))},v=(e,s)=>{j((0,t.D7)(e,s))},[N,b]=(0,n.useState)(4),C=Math.ceil(s/100),[k,I]=(0,x.lr)();return(0,n.useEffect)((()=>{const e={page:k.get("page"),term:k.get("term"),friend:k.get("friend")};let s=l,n=c;e.page&&(s=Number(e.page)),e.term&&(n={...n,term:e.term}),"null"===e.friend&&(n={...n,friend:null}),"true"===e.friend&&(n={...n,friend:!0}),"false"===e.friend&&(n={...n,friend:!1}),v(s,n)}),[k]),(0,n.useEffect)((()=>{const e=c.term,s=c.friend;let n=(""===e?"":"&term=".concat(e))+(null===s?"":"&friend=".concat(s))+(1===l?"":"&page=".concat(l));I(n)}),[c,l]),(0,m.jsxs)("div",{className:a.users,children:[(0,m.jsxs)("div",{className:a.infoPage,children:[(0,m.jsx)("span",{children:"Users per page: 100"}),(0,m.jsxs)("span",{children:["Total pages: ",C]}),(0,m.jsxs)("span",{children:["Total users: ",s]})]}),(0,m.jsx)(p,{totalPage:C,setPage:P,page:l,setCount:b,users:e,loading:o}),(0,m.jsx)(f,{setPage:P,requestUsers:v,page:l}),(0,m.jsx)(w,{users:e,count:N}),(0,m.jsx)(_,{setCurrentPage:P,count:N,totalPage:C,currentPage:l,setCount:b,users:e,loading:o})]})}))}}]);
//# sourceMappingURL=170.537d0d0a.chunk.js.map